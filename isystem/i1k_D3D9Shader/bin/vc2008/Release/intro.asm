; Listing generated by Microsoft (R) Optimizing Compiler Version 15.00.30729.01 

	TITLE	c:\Users\Matt\Downloads\isystem\i1k_D3D9Shader\src\intro.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

CONST	SEGMENT
_quadVerts DD	03f800000r			; 1
	DD	0bf800000r			; -1
	DD	000000000r			; 0
	DD	03f800000r			; 1
	DD	000000000r			; 0
	DD	0bf800000r			; -1
	DD	0bf800000r			; -1
	DD	000000000r			; 0
	DD	000000000r			; 0
	DD	000000000r			; 0
	DD	03f800000r			; 1
	DD	03f800000r			; 1
	DD	000000000r			; 0
	DD	03f800000r			; 1
	DD	03f800000r			; 1
	DD	0bf800000r			; -1
	DD	03f800000r			; 1
	DD	000000000r			; 0
	DD	000000000r			; 0
	DD	03f800000r			; 1
_shaderCode DB	'float4 ps_main(float2 u:texcoord):color{return float4(u.'
	DB	'x,u.y,0.4,1);}', 00H
CONST	ENDS
PUBLIC	??_C@_07EIJFFEIO@ps_main?$AA@			; `string'
PUBLIC	??_C@_06FLIKLIIL@ps_2_0?$AA@			; `string'
PUBLIC	?intro_init@@YIXPAUIDirect3DDevice9@@@Z		; intro_init
EXTRN	__imp__DebugBreak@0:PROC
EXTRN	__imp__OutputDebugStringA@4:PROC
EXTRN	_D3DXCompileShader@40:PROC
_BSS	SEGMENT
_gShader DD	01H DUP (?)
_BSS	ENDS
;	COMDAT ??_C@_07EIJFFEIO@ps_main?$AA@
; File c:\users\matt\downloads\isystem\i1k_d3d9shader\src\intro.cpp
CONST	SEGMENT
??_C@_07EIJFFEIO@ps_main?$AA@ DB 'ps_main', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_06FLIKLIIL@ps_2_0?$AA@
CONST	SEGMENT
??_C@_06FLIKLIIL@ps_2_0?$AA@ DB 'ps_2_0', 00H		; `string'
; Function compile flags: /Ogspy
CONST	ENDS
;	COMDAT ?intro_init@@YIXPAUIDirect3DDevice9@@@Z
_TEXT	SEGMENT
_tmp$ = -8						; size = 4
_errors$ = -4						; size = 4
?intro_init@@YIXPAUIDirect3DDevice9@@@Z PROC		; intro_init, COMDAT
; _d3dDevice$ = ecx

; 37   : {

	push	ebp
	mov	ebp, esp
	push	ecx
	push	ecx
	push	esi
	push	edi

; 38   :     ID3DXBuffer *tmp;
; 39   :     #ifndef DEBUG
; 40   :     D3DXCompileShader( shaderCode, sizeof(shaderCode)-1, 0, 0, "ps_main", "ps_2_0", D3DXSHADER_OPTIMIZATION_LEVEL3|D3DXSHADER_PREFER_FLOW_CONTROL, &tmp, 0, 0 );
; 41   :     #else
; 42   :     ID3DXBuffer *errors;
; 43   :     if( D3DXCompileShader( shaderCode, sizeof(shaderCode)-1, 0, 0, "ps_main", "ps_2_0", D3DXSHADER_DEBUG*0+1*(D3DXSHADER_OPTIMIZATION_LEVEL3|D3DXSHADER_PREFER_FLOW_CONTROL), &tmp, &errors, 0 ) <0 )

	xor	eax, eax
	push	eax
	mov	edi, ecx
	lea	ecx, DWORD PTR _errors$[ebp]
	push	ecx
	lea	ecx, DWORD PTR _tmp$[ebp]
	push	ecx
	push	33792					; 00008400H
	push	OFFSET ??_C@_06FLIKLIIL@ps_2_0?$AA@
	push	OFFSET ??_C@_07EIJFFEIO@ps_main?$AA@
	push	eax
	push	eax
	push	70					; 00000046H
	push	OFFSET _shaderCode
	call	_D3DXCompileShader@40
	test	eax, eax
	jge	SHORT $LN1@intro_init

; 44   :     {
; 45   :         OutputDebugString( (char*)errors->GetBufferPointer() );

	mov	eax, DWORD PTR _errors$[ebp]
	mov	ecx, DWORD PTR [eax]
	push	eax
	call	DWORD PTR [ecx+12]
	push	eax
	call	DWORD PTR __imp__OutputDebugStringA@4

; 46   :         errors->Release();

	mov	eax, DWORD PTR _errors$[ebp]
	mov	ecx, DWORD PTR [eax]
	push	eax
	call	DWORD PTR [ecx+8]

; 47   :         DebugBreak();

	call	DWORD PTR __imp__DebugBreak@0
$LN1@intro_init:

; 48   :     }
; 49   :     #endif
; 50   :     d3dDevice->CreatePixelShader( (DWORD*)tmp->GetBufferPointer(), &gShader );

	mov	eax, DWORD PTR _tmp$[ebp]
	mov	ecx, DWORD PTR [eax]
	mov	esi, DWORD PTR [edi]
	push	OFFSET _gShader
	push	eax
	call	DWORD PTR [ecx+12]
	push	eax
	push	edi
	call	DWORD PTR [esi+424]
	pop	edi
	pop	esi

; 51   : }

	leave
	ret	0
?intro_init@@YIXPAUIDirect3DDevice9@@@Z ENDP		; intro_init
_TEXT	ENDS
PUBLIC	?intro_do@@YIXPAUIDirect3DDevice9@@J@Z		; intro_do
EXTRN	__fltused:DWORD
; Function compile flags: /Ogspy
;	COMDAT ?intro_do@@YIXPAUIDirect3DDevice9@@J@Z
_TEXT	SEGMENT
?intro_do@@YIXPAUIDirect3DDevice9@@J@Z PROC		; intro_do, COMDAT
; _d3dDevice$ = ecx
; _time$ = edx

; 54   : {

	push	esi
	mov	esi, ecx

; 55   :     const float t = (float)time / 1000.0f;
; 56   : 
; 57   :     d3dDevice->BeginScene();

	mov	eax, DWORD PTR [esi]
	push	esi
	call	DWORD PTR [eax+164]

; 58   :     d3dDevice->SetPixelShader( gShader );

	push	DWORD PTR _gShader
	mov	eax, DWORD PTR [esi]
	push	esi
	call	DWORD PTR [eax+428]

; 59   :     d3dDevice->SetFVF( D3DFVF_XYZ|D3DFVF_TEX1 );

	mov	eax, DWORD PTR [esi]
	push	258					; 00000102H
	push	esi
	call	DWORD PTR [eax+356]

; 60   :     d3dDevice->DrawPrimitiveUP(D3DPT_TRIANGLESTRIP,2,quadVerts,5*sizeof(float));

	mov	eax, DWORD PTR [esi]
	push	20					; 00000014H
	push	OFFSET _quadVerts
	push	2
	push	5
	push	esi
	call	DWORD PTR [eax+332]

; 61   :     d3dDevice->EndScene();

	mov	eax, DWORD PTR [esi]
	push	esi
	call	DWORD PTR [eax+168]

; 62   :     d3dDevice->Present( NULL, NULL, NULL, NULL );

	mov	ecx, DWORD PTR [esi]
	xor	eax, eax
	push	eax
	push	eax
	push	eax
	push	eax
	push	esi
	call	DWORD PTR [ecx+68]
	pop	esi

; 63   : }

	ret	0
?intro_do@@YIXPAUIDirect3DDevice9@@J@Z ENDP		; intro_do
_TEXT	ENDS
END
